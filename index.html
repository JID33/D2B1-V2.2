<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dream2Build</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Custom styles for tabs are now in style.css -->
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <!-- Message Display Area (for displayTempMessage) -->
    <div id="tempMessageContainer"></div>

    <!-- Main Container -->
    <div class="relative w-full max-w-md bg-white p-8 rounded-lg shadow-lg">

        <h2 class="text-2xl font-bold text-center mb-6 text-indigo-600">Dream2Build</h2>

        <!-- Sign Up Panel -->
        <div id="signUpPanel" class="panel">
            <h3 class="text-xl font-semibold mb-4 text-center">Sign Up</h3>
            <form id="signUpForm" class="space-y-4">
                <div>
                    <label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label>
                    <input type="text" id="firstName" name="firstName" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                    <input type="text" id="lastName" name="lastName" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="phoneNumber" class="block text-sm font-medium text-gray-700">Phone Number</label>
                    <input type="tel" id="phoneNumber" name="phoneNumber" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="email" name="email" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="password" name="password" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Confirm Password</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="referralCode" class="block text-sm font-medium text-gray-700">Referral Code (Optional)</label>
                    <input type="text" id="referralCode" name="referralCode" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                <button type="submit" class="w-full bg-indigo-600 text-white p-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Sign Up</button>
                <p id="signUpMsg" class="text-center text-sm mt-2 hidden"></p>
            </form>
            <p class="text-center text-sm mt-4">Already have an account? <a href="#" onclick="showLogin()" class="text-indigo-600 hover:underline">Login here</a></p>
            <p class="text-center text-sm mt-2">Admin/Leader? <a href="#" onclick="showAdminLoginRegister()" class="text-indigo-600 hover:underline">Login here</a></p>
            <p class="text-center text-sm mt-2">Need help? <a href="#" onclick="showContactAdmin()" class="text-indigo-600 hover:underline">Contact Admin</a></p>

        </div>

        <!-- Login Panel (hidden by default) -->
        <div id="loginPanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">Login</h3>
            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="loginEmail" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="loginEmail" name="loginEmail" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="loginPassword" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="loginPassword" name="loginPassword" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <button type="submit" class="w-full bg-indigo-600 text-white p-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Login</button>
                <p id="loginMsg" class="text-center text-sm mt-2 hidden"></p>
            </form>
            <p class="text-center text-sm mt-4">Don't have an account? <a href="#" onclick="showSignUp()" class="text-indigo-600 hover:underline">Sign Up here</a></p>
            <p class="text-center text-sm mt-2">Admin/Leader? <a href="#" onclick="showAdminLoginRegister()" class="text-indigo-600 hover:underline">Login here</a></p>
            <p class="text-center text-sm mt-2">Need help? <a href="#" onclick="showContactAdmin()" class="text-indigo-600 hover:underline">Contact Admin</a></p>
        </div>

        <!-- Verification Message Panel (hidden by default) -->
        <div id="verificationMessagePanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">Verify Your Account</h3>
            <p class="text-center text-gray-700 mb-4">A verification link has been sent to <span id="verificationEmailDisplay" class="font-bold"></span>. Please check your email to activate your account.</p>
            <p class="text-center text-sm mt-4">Already verified? <a href="#" onclick="showLogin()" class="text-indigo-600 hover:underline">Login here</a></p>
        </div>

        <!-- Payment Panel (hidden by default) -->
        <div id="paymentPanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">Payment for <span id="paymentUserName" class="font-bold"></span></h3>
            <p class="text-center text-gray-700 mb-4">Please make a payment of $25 to activate your account.</p>
            <form id="paymentForm" class="space-y-4">
                <div>
                    <label for="paymentMethod" class="block text-sm font-medium text-gray-700">Payment Method</label>
                    <select id="paymentMethod" name="paymentMethod" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" onchange="showPaymentInstructions(this.value)" required>
                        <option value="">Select a method</option>
                        <option value="moncash">MonCash</option>
                        <option value="natcash">NatCash</option>
                        <option value="banktransfer">Bank Transfer</option>
                        <option value="cash">Cash</option>
                    </select>
                </div>

                <div id="paymentInstructions" class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md hidden">
                    <h4 class="font-semibold text-blue-800 mb-2">Payment Instructions:</h4>
                    <div id="moncashInfo" class="hidden">
                        <p><strong>MonCash:</strong> Send $25 to MonCash number: 509-XXXX-XXXX</p>
                        <p>Reference: Your Email (<span id="moncashEmailRef" class="font-bold"></span>)</p>
                    </div>
                    <div id="natcashInfo" class="hidden">
                        <p><strong>NatCash:</strong> Send $25 to NatCash number: 509-YYYY-YYYY</p>
                        <p>Reference: Your Email (<span id="natcashEmailRef" class="font-bold"></span>)</p>
                    </div>
                    <div id="banktransferInfo" class="hidden">
                        <p><strong>Bank Transfer:</strong> Transfer $25 to Bank Name: ABC Bank, Account No: 123456789</p>
                        <p>Reference: Your Email (<span id="banktransferEmailRef" class="font-bold"></span>)</p>
                    </div>
                    <div id="cashInfo" class="hidden">
                        <p><strong>Cash:</strong> Contact a team leader to arrange a cash payment.</p>
                        <p>Reference: Your Email (<span id="cashEmailRef" class="font-bold"></span>)</p>
                    </div>
                    <p class="mt-2 text-sm text-blue-700">Your account will be activated after payment validation by a team leader.</p>
                </div>

                <button type="submit" class="w-full bg-green-600 text-white p-2 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2">Submit Payment Info</button>
                <p id="paymentMsg" class="text-center text-sm mt-2 hidden"></p>
            </form>
            <p class="text-center text-sm mt-4"><a href="#" onclick="logoutUser()" class="text-red-600 hover:underline">Logout</a></p>
        </div>

        <!-- Main Platform Panel (hidden by default) -->
        <div id="mainPlatformPanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">Welcome, <span id="loggedInUserName" class="font-bold text-indigo-600"></span>!</h3>
            <p id="adminAreaNote" class="text-center text-red-500 mb-4 font-semibold"></p>

            <div id="participantFinancials" class="space-y-2 mb-6 p-4 border border-gray-200 rounded-md bg-gray-50">
                <p class="text-gray-700">Total Invested: $<span id="participantInvest" class="font-bold">0.00</span></p>
                <p class="text-gray-700">Total Gain: $<span id="participantGain" class="font-bold">0.00</span></p>
                <p class="text-gray-700">Your Referral Code: <span id="participantReferralCode" class="font-bold text-indigo-600">N/A</span></p>
            </div>

            <h4 class="font-semibold text-lg mb-2">Platform Features:</h4>
            <ul class="list-disc list-inside space-y-1 mb-6">
                <li>View your earnings and investments.</li>
                <li>Participate in the daily rotation.</li>
                <li>Refer new members to earn bonuses.</li>
            </ul>

            <button onclick="logoutUser()" class="w-full bg-red-600 text-white p-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">Logout</button>
        </div>

        <!-- Leader Login Panel (hidden by default) -->
        <div id="leaderLoginPanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">Team Leader Login</h3>
            <form id="leaderLoginForm" class="space-y-4">
                <div>
                    <label for="loginLeaderEmail" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="loginLeaderEmail" name="loginLeaderEmail" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="loginLeaderPass" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="loginLeaderPass" name="loginLeaderPass" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white p-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">Leader Login</button>
                <p id="leaderLoginMsg" class="text-center text-sm mt-2 hidden"></p>
            </form>
            <p class="text-center text-sm mt-4">Not a leader? <a href="#" onclick="showLogin()" class="text-indigo-600 hover:underline">Back to User Login</a></p>
            <p class="text-center text-sm mt-2">Are you a new Leader? <a href="#" onclick="showLeaderRegisterOnly()" class="text-indigo-600 hover:underline">Register here</a></p>
            <p class="text-center text-sm mt-2">CEO? <a href="#" onclick="showCEOLogin()" class="text-indigo-600 hover:underline">Login here</a></p>
        </div>

        <!-- Leader Registration Panel (hidden by default) -->
        <div id="leaderRegisterPanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">Team Leader Registration</h3>
            <form id="leaderRegisterForm" class="space-y-4">
                <div>
                    <label for="leaderFirstName" class="block text-sm font-medium text-gray-700">First Name</label>
                    <input type="text" id="leaderFirstName" name="leaderFirstName" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="leaderLastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                    <input type="text" id="leaderLastName" name="leaderLastName" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="leaderPhoneNumber" class="block text-sm font-medium text-gray-700">Phone Number</label>
                    <input type="tel" id="leaderPhoneNumber" name="leaderPhoneNumber" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="leaderEmail" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="leaderEmail" name="leaderEmail" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="leaderPassword" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="leaderPassword" name="leaderPassword" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="leaderConfirmPassword" class="block text-sm font-medium text-gray-700">Confirm Password</label>
                    <input type="password" id="leaderConfirmPassword" name="leaderConfirmPassword" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white p-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">Register as Leader</button>
                <p id="leaderRegisterMsg" class="text-center text-sm mt-2 hidden"></p>
            </form>
            <p class="text-center text-sm mt-4">Already registered? <a href="#" onclick="showLeaderLoginOnly()" class="text-indigo-600 hover:underline">Login here</a></p>
        </div>


        <!-- CEO Login Panel (hidden by default) -->
        <div id="ceoLoginPanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">CEO Login</h3>
            <form id="ceoLoginForm" class="space-y-4">
                <div>
                    <label for="ceoLoginEmail" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="ceoLoginEmail" name="ceoLoginEmail" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="ceoLoginPassword" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="ceoLoginPassword" name="ceoLoginPassword" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <button type="submit" class="w-full bg-purple-600 text-white p-2 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2">CEO Login</button>
                <p id="ceoLoginMsg" class="text-center text-sm mt-2 hidden"></p>
            </form>
            <p class="text-center text-sm mt-4">Not CEO? <a href="#" onclick="showAdminLoginRegister()" class="text-indigo-600 hover:underline">Back to Admin/Leader Login</a></p>
        </div>

        <!-- Leader Panel (hidden by default) -->
        <div id="leaderPanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">Team Leader Dashboard</h3>
            <p class="text-center text-gray-700 mb-4">Welcome, <span id="leaderNameDisplay" class="font-bold text-blue-600">Leader</span>!</p>

            <!-- Tabs for Leader Dashboard - Adjusted for better layout -->
            <div class="tab-container">
                <button class="tab-button active-tab" onclick="openLeaderTab(event, 'leaderPayments')">Pending Payments</button>
                <button class="tab-button" onclick="openLeaderTab(event, 'leaderMessages')">User Messages</button>
                <button class="tab-button" onclick="openLeaderTab(event, 'leaderRotation')">Rotation Management</button>
                <button class="tab-button" onclick="openLeaderTab(event, 'leaderUsers')">Manage Users</button>
                <button class="tab-button" onclick="openLeaderTab(event, 'leaderReferral')">Referral Code</button>
            </div>

            <!-- Pending Payments Tab Content -->
            <div id="leaderPayments" class="tab-content">
                <h4 class="font-semibold text-lg mb-2">Pending Payments for Validation</h4>
                <ul id="pendingPaymentsList" class="list-disc list-inside space-y-2">
                    <!-- Payments will be loaded here by JavaScript -->
                </ul>
                <p id="noPendingPayments" class="text-center text-gray-500 mt-4">No pending payments.</p>
            </div>

            <!-- User Messages Tab Content -->
            <div id="leaderMessages" class="tab-content hidden">
                <h4 class="font-semibold text-lg mb-2">User Messages</h4>
                <ul id="userMessagesList" class="list-disc list-inside space-y-2">
                    <!-- Messages will be loaded here by JavaScript -->
                </ul>
                <p id="noUserMessages" class="text-center text-gray-500 mt-4">No user messages.</p>
            </div>

            <!-- Rotation Management Tab Content -->
            <div id="leaderRotation" class="tab-content hidden">
                <h4 class="font-semibold text-lg mb-2">Rotation Management</h4>
                <div class="space-y-4">
                    <div>
                        <p>Current Rotation Day: <span id="currentRotationDay" class="font-bold">0</span></p>
                        <p>Current Recipient: <span id="currentRecipientDisplay" class="font-bold">N/A</span></p>
                    </div>
                    <div>
                        <label for="dailyInvest" class="block text-sm font-medium text-gray-700">Daily Investment Amount ($)</label>
                        <input type="number" id="dailyInvest" value="10" min="1" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" required>
                        <button onclick="saveRotationSettings()" class="mt-2 bg-green-500 text-white p-2 rounded-md hover:bg-green-600">Save Daily Investment</button>
                    </div>
                    <div>
                        <button onclick="nextParticipant()" class="w-full bg-indigo-600 text-white p-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Advance Rotation to Next Participant</button>
                        <p id="rotationStatusMsg" class="text-center text-sm mt-2 hidden"></p>
                    </div>
                    <div>
                        <h5 class="font-semibold mt-4 mb-2">Add Participants to Rotation:</h5>
                        <select id="availableMembersSelect" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm">
                            <option value="">-- Select Paid & Active Member --</option>
                            <!-- Options populated by JS -->
                        </select>
                        <button onclick="addParticipantToRotation()" class="mt-2 bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600">Add Selected Member</button>
                        <p id="addParticipantMsg" class="text-center text-sm mt-2 hidden"></p>
                    </div>
                    <h5 class="font-semibold mt-4 mb-2">Current Participants in Rotation:</h5>
                    <ul id="rotationParticipantsList" class="list-disc list-inside space-y-1">
                        <!-- Participants will be loaded here by JavaScript -->
                    </ul>
                    <p id="noActiveParticipants" class="text-center text-gray-500 mt-4">No participants in rotation yet.</p>
                </div>
            </div>

            <!-- Manage Users Tab Content -->
            <div id="leaderUsers" class="tab-content hidden">
                <h4 class="font-semibold text-lg mb-2">Manage All Users</h4>
                <div class="overflow-x-auto">
                    <table id="adminUsersTable" class="min-w-full bg-white border border-gray-200">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Name</th>
                                <th class="py-2 px-4 border-b">Email</th>
                                <th class="py-2 px-4 border-b">Role</th>
                                <th class="py-2 px-4 border-b">Payment Status</th>
                                <th class="py-2 px-4 border-b">Account Status</th>
                                <th class="py-2 px-4 border-b">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- User data will be loaded here by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <p id="noUsersFound" class="text-center text-gray-500 mt-4">No users found.</p>
            </div>

            <!-- Referral Code Tab Content -->
            <div id="leaderReferral" class="tab-content hidden">
                <h4 class="font-semibold text-lg mb-2">Generate Referral Code</h4>
                <p class="mb-4">Generate a unique referral code for new members to use during sign up.</p>
                <button onclick="generateReferralCode()" class="bg-blue-600 text-white p-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">Generate New Code</button>
                <p id="generatedReferralCodeMsg" class="text-center text-sm mt-2 hidden"></p>
                <p class="mt-4 text-lg font-bold text-center">Your Code: <span id="generatedReferralCode" class="text-green-600"></span></p>
            </div>

            <button onclick="logoutLeader()" class="w-full bg-red-600 text-white p-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 mt-6">Logout Leader</button>
        </div>

        <!-- CEO Panel (hidden by default) -->
        <div id="ceoPanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">CEO Dashboard</h3>
            <p class="text-center text-gray-700 mb-4">Welcome, CEO!</p>

            <!-- Tabs for CEO Dashboard - Adjusted for better layout -->
            <div class="tab-container">
                <button class="tab-button active-tab" onclick="openCEOTab(event, 'ceoRotationHistory')">Rotation History</button>
                <button class="tab-button" onclick="openCEOTab(event, 'ceoAdminHistory')">Admin Activity</button>
                <button class="tab-button" onclick="openCEOTab(event, 'ceoGeneralHistory')">General History</button>
                <button class="tab-button" onclick="openCEOTab(event, 'ceoAddAdmin')">Add New Admin</button>
            </div>

            <!-- Rotation History Tab Content -->
            <div id="ceoRotationHistory" class="tab-content">
                <h4 class="font-semibold text-lg mb-2">Rotation History</h4>
                <div class="overflow-x-auto">
                    <table id="ceoRotationHistoryTable" class="min-w-full bg-white border border-gray-200">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Day</th>
                                <th class="py-2 px-4 border-b">Recipient</th>
                                <th class="py-2 px-4 border-b">Daily Invest</th>
                                <th class="py-2 px-4 border-b">Total Pool</th>
                                <th class="py-2 px-4 border-b">Recipient Gain</th>
                                <th class="py-2 px-4 border-b">Timestamp</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Rotation history will be loaded here by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <p id="noRotationHistory" class="text-center text-gray-500 mt-4">No rotation history available.</p>
                <button onclick="exportTableToCSV('ceoRotationHistoryTable', 'rotation_history.csv')" class="mt-4 bg-green-500 text-white p-2 rounded-md hover:bg-green-600">Export to CSV</button>
            </div>

            <!-- Admin Activity History Tab Content -->
            <div id="ceoAdminHistory" class="tab-content hidden">
                <h4 class="font-semibold text-lg mb-2">Admin Activity History</h4>
                <div class="overflow-x-auto">
                    <table id="adminHistoryTable" class="min-w-full bg-white border border-gray-200">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Timestamp</th>
                                <th class="py-2 px-4 border-b">Type</th>
                                <th class="py-2 px-4 border-b">Description</th>
                                <th class="py-2 px-4 border-b">Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Admin history will be loaded here by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <p id="noAdminHistory" class="text-center text-gray-500 mt-4">No admin activity history available.</p>
                <button onclick="exportTableToCSV('adminHistoryTable', 'admin_activity_history.csv')" class="mt-4 bg-green-500 text-white p-2 rounded-md hover:bg-green-600">Export to CSV</button>
            </div>

            <!-- General History Tab Content (NEW) -->
            <div id="ceoGeneralHistory" class="tab-content hidden">
                <h4 class="font-semibold text-lg mb-2">General System History</h4>
                <div class="overflow-x-auto">
                    <table id="generalHistoryTable" class="min-w-full bg-white border border-gray-200">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b">Timestamp</th>
                                <th class="py-2 px-4 border-b">Type</th>
                                <th class="py-2 px-4 border-b">Description</th>
                                <th class="py-2 px-4 border-b">Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- General history will be loaded here by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <p id="noGeneralHistory" class="text-center text-gray-500 mt-4">No general system history available.</p>
                <button onclick="exportTableToCSV('generalHistoryTable', 'general_history.csv')" class="mt-4 bg-green-500 text-white p-2 rounded-md hover:bg-green-600">Export to CSV</button>
            </div>


            <!-- Add New Admin Tab Content -->
            <div id="ceoAddAdmin" class="tab-content hidden">
                <h4 class="font-semibold text-lg mb-2">Add New Team Leader / Admin</h4>
                <form id="newAdminForm" class="space-y-4">
                    <div>
                        <label for="newAdminFirstName" class="block text-sm font-medium text-gray-700">First Name</label>
                        <input type="text" id="newAdminFirstName" name="newAdminFirstName" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" required>
                    </div>
                    <div>
                        <label for="newAdminLastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                        <input type="text" id="newAdminLastName" name="newAdminLastName" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" required>
                    </div>
                    <div>
                        <label for="newAdminPhoneNumber" class="block text-sm font-medium text-gray-700">Phone Number</label>
                        <input type="tel" id="newAdminPhoneNumber" name="newAdminPhoneNumber" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" required>
                    </div>
                    <div>
                        <label for="newAdminEmail" class="block text-sm font-medium text-gray-700">Email</label>
                        <input type="email" id="newAdminEmail" name="newAdminEmail" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" required>
                    </div>
                    <div>
                        <label for="newAdminPass" class="block text-sm font-medium text-gray-700">Password</label>
                        <input type="password" id="newAdminPass" name="newAdminPass" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm" required>
                    </div>
                    <button type="button" onclick="addAdmin()" class="w-full bg-purple-600 text-white p-2 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2">Add Admin</button>
                    <p id="newAdminMsg" class="text-center text-sm mt-2 hidden"></p>
                </form>
            </div>

            <button onclick="logoutCEO()" class="w-full bg-red-600 text-white p-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 mt-6">Logout CEO</button>
        </div>

        <!-- Contact Admin Panel (hidden by default) -->
        <div id="contactAdminPanel" class="panel hidden">
            <h3 class="text-xl font-semibold mb-4 text-center">Contact Admin</h3>
            <p class="text-center text-gray-700 mb-4">If you have any issues or questions, please fill out the form below.</p>
            <form id="contactAdminForm" class="space-y-4">
                <div>
                    <label for="contactEmail" class="block text-sm font-medium text-gray-700">Your Email</label>
                    <input type="email" id="contactEmail" name="contactEmail" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="contactSubject" class="block text-sm font-medium text-gray-700">Subject</label>
                    <input type="text" id="contactSubject" name="contactSubject" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                </div>
                <div>
                    <label for="contactMessage" class="block text-sm font-medium text-gray-700">Message</label>
                    <textarea id="contactMessage" name="contactMessage" rows="4" class="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required></textarea>
                </div>
                <button type="submit" class="w-full bg-indigo-600 text-white p-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Send Message</button>
                <p id="contactAdminMsg" class="text-center text-sm mt-2 hidden"></p>
            </form>
            <p class="text-center text-sm mt-4"><a href="#" onclick="showLogin()" class="text-indigo-600 hover:underline">Back to Login</a></p>
        </div>

    </div>

    <!-- Tab Script for Leader/CEO Dashboards -->
    <script>
        function openLeaderTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.add("hidden");
            }
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active-tab");
            }
            document.getElementById(tabName).classList.remove("hidden");
            evt.currentTarget.classList.add("active-tab");

            // Trigger data fetch for the newly opened tab
            if (tabName === 'leaderPayments') {
                fetchPendingPayments();
            } else if (tabName === 'leaderMessages') {
                fetchUserMessages();
            } else if (tabName === 'leaderRotation') {
                fetchRotationData();
            } else if (tabName === 'leaderUsers') {
                fetchAllUsersForAdmin();
            } else if (tabName === 'leaderReferral') {
                // No specific fetch needed, but ensure UI is ready
            }
        }

        function openCEOTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.add("hidden");
            }
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active-tab");
            }
            document.getElementById(tabName).classList.remove("hidden");
            evt.currentTarget.classList.add("active-tab");

            // Trigger data fetch for the newly opened tab
            if (tabName === 'ceoRotationHistory') {
                fetchCEORotationHistory();
            } else if (tabName === 'ceoAdminHistory') {
                fetchAdminHistory();
            } else if (tabName === 'ceoGeneralHistory') {
                fetchGeneralHistory();
            } else if (tabName === 'ceoAddAdmin') {
                // No specific fetch needed for this tab, it's a form
            }
        }

        // Initialize first tab as active on load for Leader/CEO panels
        document.addEventListener('DOMContentLoaded', () => {
            const leaderPanel = document.getElementById('leaderPanel');
            const ceoPanel = document.getElementById('ceoPanel');

            if (!leaderPanel.classList.contains('hidden')) {
                const firstLeaderTabButton = leaderPanel.querySelector('.tab-button');
                if (firstLeaderTabButton) {
                    firstLeaderTabButton.click(); // Simulate click to activate and fetch data
                }
            } else if (!ceoPanel.classList.contains('hidden')) {
                const firstCEOTabButton = ceoPanel.querySelector('.tab-button');
                if (firstCEOTabButton) {
                    firstCEOTabButton.click(); // Simulate click to activate and fetch data
                }
            }
        });
    </script>
    <!-- Link to your JavaScript file -->
    <script src="script.js"></script>
</body>
</html>
